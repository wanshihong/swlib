<?php
declare(strict_types=1);

namespace Swlib\Aop\Abstract;

use Swlib\Aop\Interface\AspectInterface;
use Swlib\Aop\JoinPoint;
use Throwable;

/**
 * æŠ½è±¡åˆ‡é¢åŸºç±»
 *
 * è¿™æ˜¯ AOP æ¡†æ¶çš„æ ¸å¿ƒåŸºç±»ï¼Œæä¾›äº†å››ç§é€šçŸ¥ç±»å‹çš„é»˜è®¤ç©ºå®ç°ã€‚
 * å­ç±»å¯ä»¥é€‰æ‹©æ€§åœ°è¦†ç›–éœ€è¦çš„æ–¹æ³•æ¥å®ç°å…·ä½“çš„åˆ‡é¢é€»è¾‘ã€‚
 *
 * ============================================================================
 * ğŸ“‹ æ‰§è¡Œæ—¶åºå’Œè°ƒç”¨æµç¨‹
 * ============================================================================
 *
 * å½“ä¸€ä¸ªè¢«æ‹¦æˆªçš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒAOP æ¡†æ¶ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š
 *
 *   1. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *      â”‚ æ–¹æ³•è¢«è°ƒç”¨: $service->myMethod($param)                      â”‚
 *      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                              â†“
 *   2. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *      â”‚ æ‰§è¡Œæ‰€æœ‰åˆ‡é¢çš„ before() æ–¹æ³•ï¼ˆå‰ç½®é€šçŸ¥ï¼‰                    â”‚
 *      â”‚ - æŒ‰ç…§åˆ‡é¢æ³¨å†Œçš„é¡ºåºä¾æ¬¡æ‰§è¡Œ                                â”‚
 *      â”‚ - å¯ä»¥ä¿®æ”¹æ–¹æ³•å‚æ•°                                          â”‚
 *      â”‚ - å¯ä»¥æŠ›å‡ºå¼‚å¸¸ä¸­æ–­æ‰§è¡Œ                                      â”‚
 *      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                              â†“
 *   3. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *      â”‚ æ‰§è¡Œæ‰€æœ‰åˆ‡é¢çš„ around() æ–¹æ³•ï¼ˆç¯ç»•é€šçŸ¥ï¼‰                    â”‚
 *      â”‚ - æŒ‰ç…§åˆ‡é¢æ³¨å†Œçš„é¡ºåºä¾æ¬¡æ‰§è¡Œ                                â”‚
 *      â”‚ - å¦‚æœè¿”å› nullï¼Œç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•                             â”‚
 *      â”‚ - å¦‚æœè¿”å›é nullï¼Œæ›¿ä»£åŸæ–¹æ³•çš„è¿”å›å€¼ï¼Œè·³è¿‡åç»­åˆ‡é¢        â”‚
 *      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                              â†“
 *   4. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *      â”‚ æ‰§è¡ŒåŸæ–¹æ³•ï¼ˆä»…å½“æ‰€æœ‰ around() éƒ½è¿”å› null æ—¶ï¼‰             â”‚
 *      â”‚ - æ‰§è¡Œå®é™…çš„ä¸šåŠ¡é€»è¾‘                                        â”‚
 *      â”‚ - è·å¾—è¿”å›å€¼                                                â”‚
 *      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                              â†“
 *   5. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *      â”‚ æ‰§è¡Œæ‰€æœ‰åˆ‡é¢çš„ after() æ–¹æ³•ï¼ˆåç½®é€šçŸ¥ï¼‰                     â”‚
 *      â”‚ - æŒ‰ç…§åˆ‡é¢æ³¨å†Œçš„é¡ºåºä¾æ¬¡æ‰§è¡Œ                                â”‚
 *      â”‚ - å¯ä»¥è®¿é—®æ–¹æ³•çš„è¿”å›å€¼                                      â”‚
 *      â”‚ - å¯ä»¥æŠ›å‡ºå¼‚å¸¸ä¸­æ–­æ‰§è¡Œ                                      â”‚
 *      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                              â†“
 *   6. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *      â”‚ è¿”å›æœ€ç»ˆç»“æœç»™è°ƒç”¨è€…                                        â”‚
 *      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 *
 * ============================================================================
 * âš ï¸ å¼‚å¸¸å¤„ç†æµç¨‹
 * ============================================================================
 *
 * å¦‚æœåœ¨ä»»ä½•é˜¶æ®µæŠ›å‡ºå¼‚å¸¸ï¼š
 *
 *   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *   â”‚ å¼‚å¸¸å‘ç”Ÿï¼ˆbefore/åŸæ–¹æ³•/after ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼‰               â”‚
 *   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                              â†“
 *   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *   â”‚ æ‰§è¡Œæ‰€æœ‰åˆ‡é¢çš„ afterThrowing() æ–¹æ³•ï¼ˆå¼‚å¸¸é€šçŸ¥ï¼‰            â”‚
 *   â”‚ - æŒ‰ç…§åˆ‡é¢æ³¨å†Œçš„é¡ºåºä¾æ¬¡æ‰§è¡Œ                                â”‚
 *   â”‚ - å¯ä»¥è®¿é—®å¼‚å¸¸å¯¹è±¡                                          â”‚
 *   â”‚ - å¯ä»¥è®°å½•æ—¥å¿—ã€å‘é€å‘Šè­¦ç­‰                                  â”‚
 *   â”‚ - ä¸èƒ½é˜»æ­¢å¼‚å¸¸ç»§ç»­ä¼ æ’­                                      â”‚
 *   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                              â†“
 *   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *   â”‚ å¼‚å¸¸ç»§ç»­å‘ä¸Šä¼ æ’­ç»™è°ƒç”¨è€…                                    â”‚
 *   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 *
 * ============================================================================
 * ğŸ¯ ä½¿ç”¨ç¤ºä¾‹
 * ============================================================================
 *
 * // ç¤ºä¾‹ 1: ç®€å•çš„æ—¥å¿—åˆ‡é¢
 * class LoggingAspect extends AbstractAspect {
 *     public function before(JoinPoint $joinPoint): void {
 *         echo "è°ƒç”¨æ–¹æ³•: " . $joinPoint->getMethodName();
 *     }
 *
 *     public function after(JoinPoint $joinPoint, mixed $result): void {
 *         echo "è¿”å›å€¼: " . $result;
 *     }
 * }
 *
 * // ç¤ºä¾‹ 2: ç¼“å­˜åˆ‡é¢ï¼ˆä½¿ç”¨ aroundï¼‰
 * class CachingAspect extends AbstractAspect {
 *     public function around(JoinPoint $joinPoint): mixed {
 *         $cacheKey = $joinPoint->getSignature();
 *         if ($cached = $this->cache->get($cacheKey)) {
 *             return $cached;  // è¿”å›ç¼“å­˜å€¼ï¼Œè·³è¿‡åŸæ–¹æ³•
 *         }
 *         return null;  // è¿”å› nullï¼Œç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•
 *     }
 *
 *     public function after(JoinPoint $joinPoint, mixed $result): void {
 *         $cacheKey = $joinPoint->getSignature();
 *         $this->cache->set($cacheKey, $result, 3600);
 *     }
 * }
 *
 * // ç¤ºä¾‹ 3: éªŒè¯åˆ‡é¢
 * class ValidationAspect extends AbstractAspect {
 *     public function before(JoinPoint $joinPoint): void {
 *         $args = $joinPoint->getArguments();
 *         if (empty($args[0])) {
 *             throw new \Exception("å‚æ•°ä¸èƒ½ä¸ºç©º");  // ä¸­æ–­æ‰§è¡Œ
 *         }
 *     }
 * }
 *
 * // ç¤ºä¾‹ 4: å¼‚å¸¸å¤„ç†åˆ‡é¢
 * class ErrorHandlingAspect extends AbstractAspect {
 *     public function afterThrowing(JoinPoint $joinPoint, \Throwable $exception): void {
 *         // è®°å½•å¼‚å¸¸
 *         Log::error("æ–¹æ³• {$joinPoint->getMethodName()} æŠ›å‡ºå¼‚å¸¸: " . $exception->getMessage());
 *         // å‘é€å‘Šè­¦
 *         Alert::send("ç³»ç»Ÿå¼‚å¸¸", $exception);
 *     }
 * }
 *
 * ============================================================================
 */
abstract class AbstractAspect implements AspectInterface
{
    /**
     * å‰ç½®é€šçŸ¥ - åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰è°ƒç”¨
     *
     * â±ï¸ è°ƒç”¨æ—¶æœºï¼š
     *   - åœ¨æ‰€æœ‰ before() é€šçŸ¥æ‰§è¡Œå®Œåï¼Œaround() é€šçŸ¥æ‰§è¡Œå‰
     *   - åœ¨åŸæ–¹æ³•æ‰§è¡Œå‰
     *
     * ğŸ“ å‚æ•°è¯´æ˜ï¼š
     *   - $joinPoint: è¿æ¥ç‚¹å¯¹è±¡ï¼ŒåŒ…å«æ–¹æ³•çš„æ‰€æœ‰ä¸Šä¸‹æ–‡ä¿¡æ¯
     *     - getTarget(): è·å–ç›®æ ‡å¯¹è±¡
     *     - getMethodName(): è·å–æ–¹æ³•åç§°
     *     - getArguments(): è·å–æ–¹æ³•å‚æ•°ï¼ˆå¯ä¿®æ”¹ï¼‰
     *     - setArgument(index, value): ä¿®æ”¹æŒ‡å®šå‚æ•°
     *     - getSignature(): è·å–æ–¹æ³•ç­¾å
     *
     * ğŸ’¡ å¸¸è§ç”¨é€”ï¼š
     *   - å‚æ•°éªŒè¯
     *   - æƒé™æ£€æŸ¥
     *   - å‚æ•°è½¬æ¢/é¢„å¤„ç†
     *   - è®°å½•æ–¹æ³•è°ƒç”¨æ—¥å¿—
     *   - åˆå§‹åŒ–ä¸Šä¸‹æ–‡
     *
     * âš ï¸ é‡è¦è¯´æ˜ï¼š
     *   - å¯ä»¥ä¿®æ”¹æ–¹æ³•å‚æ•°ï¼ˆé€šè¿‡ setArgument()ï¼‰
     *   - å¯ä»¥æŠ›å‡ºå¼‚å¸¸ä¸­æ–­æ–¹æ³•æ‰§è¡Œï¼ˆå¼‚å¸¸ä¼šè§¦å‘ afterThrowing()ï¼‰
     *   - ä¸èƒ½é˜»æ­¢åŸæ–¹æ³•æ‰§è¡Œï¼ˆé™¤éæŠ›å‡ºå¼‚å¸¸ï¼‰
     *   - è¿”å›å€¼è¢«å¿½ç•¥ï¼ˆè¿”å›ç±»å‹ä¸º voidï¼‰
     *   - å¤šä¸ªåˆ‡é¢æ—¶æŒ‰æ³¨å†Œé¡ºåºä¾æ¬¡æ‰§è¡Œ
     *
     * @param JoinPoint $joinPoint è¿æ¥ç‚¹å¯¹è±¡
     * @return void
     *
     * @example
     * public function before(JoinPoint $joinPoint): void {
     *     // éªŒè¯å‚æ•°
     *     $args = $joinPoint->getArguments();
     *     if (empty($args[0])) {
     *         throw new \Exception("å‚æ•°ä¸èƒ½ä¸ºç©º");
     *     }
     *
     *     // ä¿®æ”¹å‚æ•°
     *     $joinPoint->setArgument(0, trim($args[0]));
     *
     *     // è®°å½•æ—¥å¿—
     *     echo "è°ƒç”¨: " . $joinPoint->getSignature();
     * }
     */
    public function before(JoinPoint $joinPoint): void
    {
        // é»˜è®¤ç©ºå®ç° - å­ç±»å¯é€‰æ‹©è¦†ç›–
    }

    /**
     * åç½®é€šçŸ¥ - åœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸæ‰§è¡Œåè°ƒç”¨
     *
     * â±ï¸ è°ƒç”¨æ—¶æœºï¼š
     *   - åœ¨åŸæ–¹æ³•æ‰§è¡Œå®Œæˆå
     *   - åœ¨æ‰€æœ‰ after() é€šçŸ¥æ‰§è¡Œå‰
     *   - ä»…å½“æ–¹æ³•æˆåŠŸæ‰§è¡Œæ—¶è°ƒç”¨ï¼ˆå¼‚å¸¸æ—¶è°ƒç”¨ afterThrowing()ï¼‰
     *
     * ğŸ“ å‚æ•°è¯´æ˜ï¼š
     *   - $joinPoint: è¿æ¥ç‚¹å¯¹è±¡ï¼ˆåŒ before()ï¼‰
     *   - $result: åŸæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¯èƒ½ä¸º nullï¼‰
     *     - å¦‚æœåŸæ–¹æ³•è¿”å› nullï¼Œåˆ™ $result ä¸º null
     *     - å¦‚æœ around() è¿”å›é nullï¼Œåˆ™ $result ä¸º around() çš„è¿”å›å€¼
     *
     * ğŸ’¡ å¸¸è§ç”¨é€”ï¼š
     *   - è®°å½•æ–¹æ³•è¿”å›å€¼
     *   - ç¼“å­˜æ–¹æ³•ç»“æœ
     *   - ç»“æœè½¬æ¢/åå¤„ç†
     *   - æ€§èƒ½ç›‘æ§ï¼ˆè®°å½•æ‰§è¡Œæ—¶é—´ï¼‰
     *   - å‘é€é€šçŸ¥/äº‹ä»¶
     *
     * âš ï¸ é‡è¦è¯´æ˜ï¼š
     *   - ä¸èƒ½ä¿®æ”¹è¿”å›å€¼ï¼ˆ$result æ˜¯åªè¯»çš„ï¼‰
     *   - å¯ä»¥æŠ›å‡ºå¼‚å¸¸ä¸­æ–­æ‰§è¡Œï¼ˆå¼‚å¸¸ä¼šè§¦å‘ afterThrowing()ï¼‰
     *   - è¿”å›å€¼è¢«å¿½ç•¥ï¼ˆè¿”å›ç±»å‹ä¸º voidï¼‰
     *   - å¤šä¸ªåˆ‡é¢æ—¶æŒ‰æ³¨å†Œé¡ºåºä¾æ¬¡æ‰§è¡Œ
     *   - å¦‚æœ around() è¿”å›é nullï¼Œåˆ™ $result ä¸º around() çš„è¿”å›å€¼
     *
     * @param JoinPoint $joinPoint è¿æ¥ç‚¹å¯¹è±¡
     * @param mixed $result åŸæ–¹æ³•çš„è¿”å›å€¼
     * @return void
     *
     * @example
     * public function after(JoinPoint $joinPoint, mixed $result): void {
     *     // è®°å½•è¿”å›å€¼
     *     echo "è¿”å›å€¼: " . json_encode($result);
     *
     *     // ç¼“å­˜ç»“æœ
     *     $this->cache->set($joinPoint->getSignature(), $result, 3600);
     *
     *     // å‘é€äº‹ä»¶
     *     Event::dispatch('method.executed', [
     *         'method' => $joinPoint->getMethodName(),
     *         'result' => $result
     *     ]);
     * }
     */
    public function after(JoinPoint $joinPoint, mixed $result): void
    {
        // é»˜è®¤ç©ºå®ç° - å­ç±»å¯é€‰æ‹©è¦†ç›–
    }

    /**
     * å¼‚å¸¸é€šçŸ¥ - åœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸æ—¶è°ƒç”¨
     *
     * â±ï¸ è°ƒç”¨æ—¶æœºï¼š
     *   - å½“ before()ã€åŸæ–¹æ³•ã€after() ä¸­çš„ä»»ä½•ä¸€ä¸ªæŠ›å‡ºå¼‚å¸¸æ—¶
     *   - åœ¨å¼‚å¸¸ç»§ç»­å‘ä¸Šä¼ æ’­å‰
     *   - åœ¨æ‰€æœ‰ afterThrowing() é€šçŸ¥æ‰§è¡Œåï¼Œå¼‚å¸¸æ‰ä¼šç»§ç»­ä¼ æ’­
     *
     * ğŸ“ å‚æ•°è¯´æ˜ï¼š
     *   - $joinPoint: è¿æ¥ç‚¹å¯¹è±¡ï¼ˆåŒ before()ï¼‰
     *   - $exception: æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡
     *     - å¯ä»¥é€šè¿‡ $exception->getMessage() è·å–é”™è¯¯ä¿¡æ¯
     *     - å¯ä»¥é€šè¿‡ $exception->getTrace() è·å–å †æ ˆè·Ÿè¸ª
     *
     * ğŸ’¡ å¸¸è§ç”¨é€”ï¼š
     *   - è®°å½•å¼‚å¸¸æ—¥å¿—
     *   - å‘é€å‘Šè­¦/é€šçŸ¥
     *   - å¼‚å¸¸ç»Ÿè®¡
     *   - æ¸…ç†èµ„æº
     *   - å¼‚å¸¸è½¬æ¢ï¼ˆè™½ç„¶ä¸èƒ½æ”¹å˜å¼‚å¸¸ï¼Œä½†å¯ä»¥è®°å½•ï¼‰
     *
     * âš ï¸ é‡è¦è¯´æ˜ï¼š
     *   - ä¸èƒ½é˜»æ­¢å¼‚å¸¸ç»§ç»­ä¼ æ’­ï¼ˆå¼‚å¸¸ä¼šç»§ç»­å‘ä¸ŠæŠ›å‡ºï¼‰
     *   - ä¸èƒ½ä¿®æ”¹å¼‚å¸¸å¯¹è±¡
     *   - å¯ä»¥æŠ›å‡ºæ–°çš„å¼‚å¸¸ï¼ˆä¼šæ›¿ä»£åŸå¼‚å¸¸ç»§ç»­ä¼ æ’­ï¼‰
     *   - è¿”å›å€¼è¢«å¿½ç•¥ï¼ˆè¿”å›ç±»å‹ä¸º voidï¼‰
     *   - å¤šä¸ªåˆ‡é¢æ—¶æŒ‰æ³¨å†Œé¡ºåºä¾æ¬¡æ‰§è¡Œ
     *   - å¦‚æœ afterThrowing() ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œæ–°å¼‚å¸¸ä¼šæ›¿ä»£åŸå¼‚å¸¸
     *
     * @param JoinPoint $joinPoint è¿æ¥ç‚¹å¯¹è±¡
     * @param Throwable $exception æŠ›å‡ºçš„å¼‚å¸¸
     * @return void
     *
     * @example
     * public function afterThrowing(JoinPoint $joinPoint, \Throwable $exception): void {
     *     // è®°å½•å¼‚å¸¸æ—¥å¿—
     *     Log::error("æ–¹æ³• {$joinPoint->getMethodName()} æŠ›å‡ºå¼‚å¸¸", [
     *         'message' => $exception->getMessage(),
     *         'code' => $exception->getCode(),
     *         'trace' => $exception->getTraceAsString()
     *     ]);
     *
     *     // å‘é€å‘Šè­¦
     *     Alert::send("ç³»ç»Ÿå¼‚å¸¸", $exception);
     *
     *     // ç»Ÿè®¡å¼‚å¸¸
     *     Metrics::increment('exception.count', [
     *         'method' => $joinPoint->getMethodName(),
     *         'exception' => get_class($exception)
     *     ]);
     * }
     */
    public function afterThrowing(JoinPoint $joinPoint, Throwable $exception): void
    {
        // é»˜è®¤ç©ºå®ç° - å­ç±»å¯é€‰æ‹©è¦†ç›–
    }

    /**
     * ç¯ç»•é€šçŸ¥ - å®Œå…¨æ§åˆ¶ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œ
     *
     * â±ï¸ è°ƒç”¨æ—¶æœºï¼š
     *   - åœ¨æ‰€æœ‰ before() é€šçŸ¥æ‰§è¡Œå®Œå
     *   - åœ¨åŸæ–¹æ³•æ‰§è¡Œå‰
     *   - åœ¨æ‰€æœ‰ around() é€šçŸ¥æ‰§è¡Œåï¼Œafter() é€šçŸ¥æ‰§è¡Œå‰
     *
     * ğŸ“ å‚æ•°è¯´æ˜ï¼š
     *   - $joinPoint: è¿æ¥ç‚¹å¯¹è±¡ï¼ˆåŒ before()ï¼‰
     *
     * ğŸ“¤ è¿”å›å€¼è¯´æ˜ï¼ˆéå¸¸é‡è¦ï¼‰ï¼š
     *   - è¿”å› nullï¼š
     *     * è¡¨ç¤ºç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•
     *     * åŸæ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼Œå…¶è¿”å›å€¼ä¼šä¼ é€’ç»™ after() é€šçŸ¥
     *     * åç»­çš„ around() åˆ‡é¢ä¼šç»§ç»­æ‰§è¡Œ
     *
     *   - è¿”å›é null å€¼ï¼š
     *     * è¡¨ç¤ºæ›¿ä»£åŸæ–¹æ³•çš„è¿”å›å€¼
     *     * åŸæ–¹æ³•ä¸ä¼šè¢«æ‰§è¡Œ
     *     * è¿”å›å€¼ä¼šç›´æ¥ä¼ é€’ç»™ after() é€šçŸ¥
     *     * åç»­çš„ around() åˆ‡é¢ä¸ä¼šæ‰§è¡Œ
     *     * è¿™æ˜¯å®ç°ç¼“å­˜ã€çŸ­è·¯ç­‰åŠŸèƒ½çš„å…³é”®
     *
     * ğŸ’¡ å¸¸è§ç”¨é€”ï¼š
     *   - ç¼“å­˜ï¼ˆè¿”å›ç¼“å­˜å€¼ï¼Œè·³è¿‡åŸæ–¹æ³•ï¼‰
     *   - çŸ­è·¯ï¼ˆæå‰è¿”å›ç»“æœï¼‰
     *   - æ–¹æ³•æ›¿ä»£ï¼ˆç”¨å…¶ä»–é€»è¾‘æ›¿ä»£åŸæ–¹æ³•ï¼‰
     *   - æ€§èƒ½ä¼˜åŒ–
     *   - æ¡ä»¶æ‰§è¡Œ
     *
     * âš ï¸ é‡è¦è¯´æ˜ï¼š
     *   - è¿™æ˜¯æœ€å¼ºå¤§çš„é€šçŸ¥ç±»å‹ï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶æ–¹æ³•æ‰§è¡Œ
     *   - è¿”å› null å’Œä¸è¿”å›ä»»ä½•å€¼çš„æ•ˆæœç›¸åŒ
     *   - å¦‚æœè¿”å›é nullï¼ŒåŸæ–¹æ³•ä¸ä¼šè¢«æ‰§è¡Œ
     *   - å¤šä¸ªåˆ‡é¢æ—¶ï¼Œç¬¬ä¸€ä¸ªè¿”å›é null çš„ around() ä¼šé˜»æ­¢åç»­åˆ‡é¢æ‰§è¡Œ
     *   - å¯ä»¥æŠ›å‡ºå¼‚å¸¸ä¸­æ–­æ‰§è¡Œ
     *   - å¯ä»¥ä¿®æ”¹å‚æ•°åè°ƒç”¨åŸæ–¹æ³•ï¼ˆè™½ç„¶è¿™é‡Œæ²¡æœ‰ç›´æ¥çš„æ–¹æ³•è°ƒç”¨ï¼‰
     *
     * @param JoinPoint $joinPoint è¿æ¥ç‚¹å¯¹è±¡
     * @return mixed|null è¿”å› null ç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•ï¼Œè¿”å›å…¶ä»–å€¼æ›¿ä»£åŸæ–¹æ³•è¿”å›å€¼
     *
     * @example
     * // ç¤ºä¾‹ 1: ç¼“å­˜å®ç°
     * public function around(JoinPoint $joinPoint): mixed {
     *     $cacheKey = $joinPoint->getSignature();
     *
     *     // æ£€æŸ¥ç¼“å­˜
     *     if ($cached = $this->cache->get($cacheKey)) {
     *         return $cached;  // è¿”å›ç¼“å­˜å€¼ï¼Œè·³è¿‡åŸæ–¹æ³•
     *     }
     *
     *     // ç¼“å­˜ä¸å­˜åœ¨ï¼Œç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•
     *     return null;
     * }
     *
     * @example
     * // ç¤ºä¾‹ 2: æ¡ä»¶æ‰§è¡Œ
     * public function around(JoinPoint $joinPoint): mixed {
     *     $args = $joinPoint->getArguments();
     *
     *     // å¦‚æœå‚æ•°ä¸ºç©ºï¼Œç›´æ¥è¿”å›é»˜è®¤å€¼
     *     if (empty($args[0])) {
     *         return [];  // è·³è¿‡åŸæ–¹æ³•ï¼Œè¿”å›ç©ºæ•°ç»„
     *     }
     *
     *     // å¦åˆ™ç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•
     *     return null;
     * }
     *
     * @example
     * // ç¤ºä¾‹ 3: æ€§èƒ½ç›‘æ§
     * public function around(JoinPoint $joinPoint): mixed {
     *     $startTime = microtime(true);
     *
     *     // ç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•
     *     $result = null;  // è¿”å› nullï¼Œè®©åŸæ–¹æ³•æ‰§è¡Œ
     *
     *     // æ³¨æ„ï¼šè¿™é‡Œæ— æ³•ç›´æ¥è·å–æ‰§è¡Œæ—¶é—´ï¼Œåº”è¯¥åœ¨ after() ä¸­å¤„ç†
     *     return $result;
     * }
     */
    public function around(JoinPoint $joinPoint): mixed
    {
        // é»˜è®¤å®ç°ï¼šè¿”å› null è¡¨ç¤ºç»§ç»­æ‰§è¡ŒåŸæ–¹æ³•
        // å­ç±»å¯ä»¥è¦†ç›–æ­¤æ–¹æ³•æ¥å®ç°ç¼“å­˜ã€çŸ­è·¯ç­‰åŠŸèƒ½
        return null;
    }
}

